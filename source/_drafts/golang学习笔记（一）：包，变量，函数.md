---
title: golangå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šåŒ…ï¼Œå˜é‡ï¼Œå‡½æ•°
date: 2020-02-14 23:25:09
---

> æ¬¢è¿è®¿é—®æˆ‘çš„[åšå®¢](http://blog.tanweime.com/)å’Œ[github](https://github.com/veeupup)!

go è¯­è¨€å­¦ä¹ ç¬”è®°ï¼Œæ¥è‡ª [gotour](https://tour.golang.org/list) ï¼Œä»¥åè¦å¸¸å†™ç¬”è®°ï¼ŒæŠŠè‡ªå·±å­¦ä¹ ç¬”è®°è®°å½•ä¸‹æ¥ï¼Œå°±ç®—åªæ˜¯ç¬”è®°ä¹Ÿè¦å¤šå†™ã€‚

å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œä¹Ÿè¦å¤šé”»ç‚¼è‡ªå·±çš„å†™ä½œèƒ½åŠ›ã€‚

è¯´å®è¯ï¼Œä»Šå¤©å¾ˆç´¯äº†ï¼Œæœ€è¿‘åœ¨æŠ˜è…¾æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå› ä¸ºåŸå…ˆå†™äº†ä¸ªbootloaderï¼Œç°åœ¨æƒ³è¦è½¬å‘ grub æ¥ï¼Œé‡åˆ°å‘å¤ªå¤šäº†ï¼Œå·²ç»ä¸¤å¤©äº†ğŸ˜­ã€‚

è¿˜æ˜¯æ¥è§¦ä¸€ç‚¹æ–°çŸ¥è¯†ç®€å•çš„ä¸œè¥¿ï¼Œæ¥ç¼“å†²ä¸€ä¸‹ï¼Œè„‘å­è¿·è¿·ç³Šç³Šçš„ã€‚

<!--more-->

# **package**

æ¯ä¸ªGoç¨‹åºç”±å¾ˆå¤šåŒ…ç»„æˆã€‚

ç¨‹åºéƒ½æ˜¯ä» main åŒ…å¼€å§‹è¿è¡Œã€‚

è¯¥ç¨‹åºæ­£åœ¨ä½¿ç”¨å¯¼å…¥è·¯å¾„ä¸ºâ€œ fmtâ€å’Œâ€œ math / randâ€çš„è½¯ä»¶åŒ…ã€‚

æŒ‰ç…§çº¦å®šï¼Œç¨‹åºåŒ…åç§°ä¸å¯¼å…¥è·¯å¾„çš„æœ€åä¸€ä¸ªå…ƒç´ ç›¸åŒã€‚

 ä¾‹å¦‚ï¼Œâ€œ math / randâ€åŒ…åŒ…æ‹¬ä»¥è¯­å¥åŒ…randå¼€å¤´çš„æ–‡ä»¶ã€‚

## import

æ­¤ä»£ç å°†å¯¼å…¥åˆ†ç»„ä¸ºå¸¦æ‹¬å·çš„â€œåˆ†è§£çš„â€å¯¼å…¥è¯­å¥ã€‚

æ‚¨è¿˜å¯ä»¥ç¼–å†™å¤šä¸ªå¯¼å…¥è¯­å¥ï¼Œä¾‹å¦‚ï¼š

```go
package main

import (
	"fmt"
	"math"
)

func main() {
	fmt.Println(math.Pi)
}

```

ä½†æ˜¯ä½¿ç”¨åˆ†è§£å¼importè¯­å¥æ˜¯ä¸€ç§å¾ˆå¥½çš„æ ·å¼ã€‚

## **å¯¼å‡ºåç§°**

åœ¨Goä¸­ï¼Œå¦‚æœåç§°ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œåˆ™å¯¼å‡ºè¯¥åç§°ã€‚

ä¾‹å¦‚ï¼ŒPizzaæ˜¯ä¸€ä¸ªå¯¼å‡ºçš„åç§°ï¼ŒPiä¹Ÿæ˜¯ï¼Œå®ƒæ˜¯ä»mathåŒ…å¯¼å‡ºçš„ã€‚

pizzaå’Œpiä¸ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œæ‰€ä»¥å®ƒä»¬ä¸è¢«å¯¼å‡ºã€‚

åœ¨å¯¼å…¥åŒ…æ—¶ï¼Œæ‚¨åªèƒ½å¼•ç”¨å®ƒå¯¼å‡ºçš„åç§°ã€‚ä»»ä½•â€œæœªå¯¼å‡ºâ€çš„åç§°éƒ½ä¸èƒ½ä»åŒ…å¤–éƒ¨è®¿é—®ã€‚

```go
package main

import (
	"fmt"
	"math"
)

func main() {
	fmt.Println(math.Pi)
}

```

# **å‡½æ•°**

ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œaddæ¥å—ä¸¤ä¸ªç±»å‹ä¸ºintçš„å‚æ•°ã€‚

è¯·æ³¨æ„ï¼Œç±»å‹ä½äºå˜é‡åç§°ä¹‹åã€‚

```go
package main

import "fmt"

func add(x int, y int) int {
	return x + y
}

func mins(x int, y int) int {
	return x - y;
}

func main() {
	fmt.Println(add(42, 13))
	fmt.Println(mins(23, 11))
}

```

å½“ä¸¤ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„å‘½åå‡½æ•°å‚æ•°å…±äº«ä¸€ä¸ªç±»å‹æ—¶ï¼Œå¯ä»¥ä»é™¤æœ€åä¸€ä¸ªä¹‹å¤–çš„æ‰€æœ‰å…¶ä»–å‚æ•°ä¸­çœç•¥è¯¥ç±»å‹ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç¼©çŸ­äº†

```go
x intï¼Œy int
```

è‡³

```go
xï¼Œy int

```

```go
package main

import "fmt"

func add(x, y int) int {
	return x + y
}

func main() {
	fmt.Println(add(42, 13))
}

```

## å¤šä¸ªè¿”å›å€¼

ä¸€ä¸ªå‡½æ•°èƒ½è¿”å›å¤šä¸ªè¿”å›å€¼ã€‚

```go
package main

import "fmt"

func swap(a, b string) (string, string) {
	return b, a
}

func main() {
	a, b := swap("ai", "ni")
	fmt.Println(a, b)
}

```

## Named return values

Goçš„è¿”å›å€¼å¯èƒ½ä¼šè¢«å‘½åã€‚

å¦‚æœæ˜¯ï¼Œåˆ™å°†å®ƒä»¬è§†ä¸ºå®šä¹‰åœ¨å‡½æ•°é¡¶éƒ¨çš„å˜é‡ã€‚

åº”è¯¥ä½¿ç”¨è¿™äº›åç§°æ¥è®°å½•è¿”å›å€¼çš„å«ä¹‰ã€‚

æ²¡æœ‰å‚æ•°çš„returnè¯­å¥è¿”å›æŒ‡å®šçš„è¿”å›å€¼ã€‚

è¿™å°±æ˜¯æ‰€è°“çš„â€œnakedâ€ returnã€‚

è£¸è¿”å›è¯­å¥åº”è¯¥åªåœ¨çŸ­å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚

åœ¨è¾ƒé•¿çš„å‡½æ•°ä¸­ï¼Œå®ƒä»¬å¯èƒ½ä¼šæŸå®³å¯è¯»æ€§ã€‚

```go
package main

import "fmt"

func split(sum int) (x, y int) {
	x = sum * 4 / 9
	y = sum - x
	return
}


func main() {
	fmt.Println(split(17))
}

```



# **å˜é‡**

varè¯­å¥å£°æ˜äº†ä¸€ä¸ªå˜é‡åˆ—è¡¨;åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ï¼Œç±»å‹æ˜¯æœ€åä¸€ä¸ªã€‚

varè¯­å¥å¯ä»¥æ˜¯åŒ…çº§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°çº§çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤è€…ã€‚

```go
package main

import "fmt"

var c, python, java bool

func main() {
	var i int
	fmt.Println(i, c, python, java)
}

```

## åˆå§‹åŒ–æ•°å€¼

varå£°æ˜å¯ä»¥åŒ…å«åˆå§‹åŒ–å™¨ï¼Œæ¯ä¸ªå˜é‡ä¸€ä¸ªã€‚

å¦‚æœæœ‰åˆå§‹åŒ–ï¼Œç±»å‹å¯ä»¥çœç•¥;è¯¥å˜é‡å°†é‡‡ç”¨åˆå§‹åŒ–å™¨çš„ç±»å‹ã€‚

```go
package main

import "fmt"

var i, j int = 1, 2

func main() {
	var c, python, java = true, false, "no!"
	fmt.Println(i, j, c, python, java)
}

```

## **çŸ­å˜é‡åˆå§‹åŒ–**

åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨:= shortèµ‹å€¼è¯­å¥æ¥ä»£æ›¿å…·æœ‰éšå¼ç±»å‹çš„varå£°æ˜ã€‚

åœ¨å‡½æ•°ä¹‹å¤–ï¼Œæ¯ä¸ªè¯­å¥éƒ½ä»¥ä¸€ä¸ªå…³é”®å­—(varã€funcç­‰)å¼€å¤´ï¼Œå› æ­¤:=ç»“æ„ä¸å¯ç”¨

```go
package main

import "fmt"

func main() {
	var i, j int = 1, 2
	k := 3
	c, python, java := true, false, "no!"
	fmt.Println(a ,i, j, k, c, python, java)
}

```

## åŸºæœ¬æ•°æ®ç±»å‹

go è¯­è¨€çš„åŸºæœ¬æ•°æ®ç±»å‹

```go
bool

string

int  int8  int16  int32  int64
uint uint8 uint16 uint32 uint64 uintptr

byte // alias for uint8

rune // alias for int32
     // represents a Unicode code point

float32 float64

complex64 complex128
```

è¯¥ç¤ºä¾‹æ˜¾ç¤ºäº†å‡ ç§ç±»å‹çš„å˜é‡ï¼Œå¹¶ä¸”ä¸importè¯­å¥ä¸€æ ·ï¼Œå˜é‡å£°æ˜ä¹Ÿå¯ä»¥â€œåˆ†è§£â€ä¸ºå—ã€‚

intï¼Œuintå’Œuintptrç±»å‹é€šå¸¸åœ¨32ä½ç³»ç»Ÿä¸Šä¸º32ä½å®½ï¼Œåœ¨64ä½ç³»ç»Ÿä¸Šä¸º64ä½å®½ã€‚

 å½“æ‚¨éœ€è¦æ•´æ•°å€¼æ—¶ï¼Œåº”è¯¥ä½¿ç”¨intï¼Œé™¤éæœ‰ç‰¹æ®ŠåŸå› è¦ä½¿ç”¨å¤§å°æˆ–æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚

```go
package main

import (
	"fmt"
	"math/cmplx"
)

var (
	ToBe   bool       = false
	MaxInt uint64     = 1<<64 - 1
	z      complex128 = cmplx.Sqrt(-5 + 12i)
)



func main() {
	fmt.Printf("Type: %T Value: %v\n", ToBe, ToBe)
	fmt.Printf("Type: %T Value: %v\n", MaxInt, MaxInt)
	fmt.Printf("Type: %T Value: %v\n", z, z)
}

```

## **é›¶å€¼**

å£°æ˜æ—¶æ²¡æœ‰æ˜ç¡®çš„åˆå§‹å€¼çš„å˜é‡å°†è¢«èµ‹äºˆé›¶å€¼ã€‚

é›¶å€¼ä¸ºï¼š

æ•°å­—ç±»å‹ä¸º0ï¼Œ

å¯¹äºå¸ƒå°”ç±»å‹ä¸ºfalse

â€œâ€ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚

```go
package main

import "fmt"

func main() {
	var i int
	var f float64
	var b bool
	var s string
	fmt.Printf("%v %v %v %q\n", i, f, b, s)
}

```

## **ç±»å‹è½¬æ¢**

ä½¿ç”¨ T(v) å°† v å€¼è½¬æ¢ä¸º T ç±»å‹

ä¸€äº›ä¾‹å­ï¼š

```go
package main

import "fmt"

func main() {
	v := 12.2 // change me!
	fmt.Printf("v is of type %T\n", v)
}

```

ä¸Cè¯­è¨€ä¸åŒï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œä¸åŒç±»å‹çš„é¡¹ç›®ä¹‹é—´çš„åˆ†é…éœ€è¦æ˜¾å¼è½¬æ¢ã€‚

## **ç±»å‹æ¨æ–­**

åœ¨å£°æ˜å˜é‡è€Œä¸æŒ‡å®šæ˜¾å¼ç±»å‹æ—¶ï¼ˆä½¿ç”¨ï¼š=è¯­æ³•æˆ–var =è¡¨è¾¾å¼è¯­æ³•ï¼‰ï¼Œå°†ä»å³ä¾§çš„å€¼æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ã€‚

é”®å…¥å£°æ˜çš„å³ä¾§æ—¶ï¼Œæ–°å˜é‡å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼š

```go
var i int jï¼š= i // jæ˜¯ä¸€ä¸ªæ•´æ•°
```

ä½†æ˜¯ï¼Œå½“å³ä¾§åŒ…å«æ— ç±»å‹çš„æ•°å­—å¸¸é‡æ—¶ï¼Œæ–°å˜é‡å¯èƒ½æ˜¯intï¼Œfloat64æˆ–complex128ï¼Œå…·ä½“å–å†³äºå¸¸é‡çš„ç²¾åº¦ï¼š

```go
iï¼š= 42 //æ•´æ•° 

fï¼š= 3.142 // 

float64 gï¼š= 0.867 + 0.5i //complex128
```

```go
package main

import "fmt"

func main() {
	v := 12.2 // change me!
	fmt.Printf("v is of type %T\n", v)
}

```

## **å¸¸é‡**

å¸¸é‡åƒå˜é‡ä¸€æ ·å£°æ˜ï¼Œä½†æ˜¯ä½¿ç”¨constå…³é”®å­—ã€‚

å¸¸é‡å¯ä»¥æ˜¯å­—ç¬¦ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼æˆ–æ•°å­—å€¼ã€‚

ä¸èƒ½ä½¿ç”¨ï¼š=è¯­æ³•å£°æ˜å¸¸é‡ã€‚

```go
package main

import "fmt"

const Pi = 3.14

func main() {
	const World = "ä¸–ç•Œ"
	fmt.Println("Hello", World)
	fmt.Println("Happy", Pi, "Day")

	const Truth = true
	fmt.Println("Go rules?", Truth)
}

```

## **æ•°å­—å¸¸é‡**

æ•°å­—å¸¸æ•°æ˜¯é«˜ç²¾åº¦å€¼ã€‚

æœªè¯´æ˜ç±»å‹çš„å¸¸é‡é‡‡ç”¨å…¶ä¸Šä¸‹æ–‡æ‰€éœ€çš„ç±»å‹ã€‚

ï¼ˆä¸€ä¸ªintæœ€å¤šå¯ä»¥å­˜å‚¨ä¸€ä¸ª64ä½æ•´æ•°ï¼Œæœ‰æ—¶æ›´å°‘ã€‚ï¼‰

```go
package main

import "fmt"

const (
	// 1 å·¦ç§» 100 ä½
	Big = 1 << 100
	// å³ç§» 99 ä½
	Small = Big >> 99
)

func needInt(x int) int { return x*10 + 1 }
func needFloat(x float64) float64 {
	return x * 0.1
}

func main() {
	fmt.Println(needInt(Small))
	fmt.Println(needFloat(Small))
	fmt.Println(needFloat(Big))
}

```

